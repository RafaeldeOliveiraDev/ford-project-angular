<div class="p-0">
<app-header></app-header>
</div>

<div class="container-fluid">
  <div class="row">
    <!-- Sidenav -->
    <div class="col-auto p-0">
      <app-sidenav></app-sidenav>
    </div>
    
    <!-- ]dashboard contenduoo -->
    <div class="col mt-4">

      <div class="row gx-3 gy-3 my-4">
        <!-- selecionar carros -->
        <div class="col-12 col-sm-6 col-lg-3">
          <div class="card h-100 shadow-sm">
            <div class="card-body">
              <h5 class="card-title">Veículos</h5>
              <select class="form-select" (change)="onChangeSelect($event)">
                @for(v of veiculos; track v.id) {
                <option value="{{ v.id }}">{{ v.vehicle }}</option>
                }
              </select>
            </div>
          </div>
        </div>

        <!-- Totvendass -->
        <div class="col-12 col-sm-6 col-lg-3">
          <app-card class="h-100" [titulo]="'Total de vendas'" [valor]="veiculoSelecionado.volumetotal"></app-card>
        </div>

        <!-- Conectados -->
        <div class="col-12 col-sm-6 col-lg-3">
          <app-card class="h-100" [titulo]="'Conectados'" [valor]="veiculoSelecionado.connected"></app-card>
        </div>

        <!-- opudate -->
        <div class="col-12 col-sm-6 col-lg-3">
          <app-card class="h-100" [titulo]="'Upd. Software'" [valor]="veiculoSelecionado.softwareUpdates"></app-card>
        </div>
      </div>

      <!-- immagem do veiculos -->
      <div class="row mb-4">
        <div class="col text-center">
          <img src="{{ veiculoSelecionado.img }}" alt="{{ veiculoSelecionado.vehicle }}" class="img-fluid rounded shadow" style="max-height: 300px; object-fit: contain;" />
        </div>
      </div>

      <div class="row justify-content-center my-4">
        <div class="col-12 col-sm-6 col-lg-4">
          <div class="card h-100 shadow-sm">
            <div class="card-body">
              <h5 class="card-title">Buscar por VIN</h5>
              <input
                type="text"
                class="form-control"
                [formControl]="vinControl"
                placeholder="Digite o código VIN"
        />
        <button class="btn btn-outline-primary" (click)="solicitarProposta()">
          Solicitar Proposta
        </button>

      <app-contato *ngIf="mostrarContato" (fechar)="mostrarContato = false" />

        <small class="text-danger" *ngIf="vinNotFound">
          VIN não encontrado.
        </small>
      </div>
    </div>
  </div>
</div>

      <!-- tabela de dados -->
      <div class="row mb-5">
        <div class="col">
          <div class="table-responsive shadow-sm rounded">
            <app-car-table
              [vin]="veiculoSelecionado.vin"
              [lat]="vinInfos.lat"
              [long]="vinInfos.long"
              [nivelCombustivel]="vinInfos.nivelCombustivel"
              [odometro]="vinInfos.odometro"
              [status]="vinInfos.status"
            ></app-car-table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
